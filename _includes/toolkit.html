<style>

.page-wrapper {
  margin: 0 auto;
  position: relative;
  z-index: 1;
}

#toolkit {
  color: #000;
  background-color: #f5f5f5;
  padding: 80px 20px;
  position: relative;
  {% if locale != "ar" %}
  margin-left: 240px;
  {% endif %}
  z-index: 2;
}
#toolkit-sidebar {
  position: absolute;
  width: 240px;
  display: block;
  background: #000;
  top: 0;
  bottom: 0;
  left: 0;
  z-index: 3;
}
.menu-btn {
  cursor: pointer;
  position: fixed;
  top: 55px;
  left: 5px;
  font-size: 16px;
  display: none;
}
.navbar-toggle.collapsed {
  margin-bottom: 0px;
}

@media screen and (max-width: 980px){
  .menu-btn {
    display: block;
  }
  .menu-btn.is-open {
    left: 245px;
  }
  #toolkit-sidebar {
    margin-left: -240px;
  }
  #toolkit-sidebar.is-open {
    margin-left: 0px;
  }
  #toolkit {
    margin-left: 0;
  }
  #toolkit.is-open {
    margin-left: 240px;
    margin-right: -240px;
  }
}

#toolkit-sidebar, #toolkit, .menu-btn {
  -webkit-transition: all 0.6s ease 0s;
  -moz-transition: all 0.6s ease 0s;
  -ms-transition: all 0.6s ease 0s;
  -o-transition: all 0.6s ease 0s;
  transition: all 0.6s ease 0s;
}

.nav-wrapper {
  width: 240px;
  position: fixed;
  top: 50px;
  bottom: 0;
  margin: 0;
  overflow: auto;
  padding-left: 2px;
  padding-bottom: 60px;

}
/* all links */
.nav-wrapper .nav>li>a {
    color: #999;
    padding: 4px 20px;
    font-size: 13px;
    font-weight: 400;
    border-left: 2px solid transparent;
}

/* all active links */
.nav-wrapper .nav>.active>a,
.nav-wrapper .nav>li>a:hover,
.nav-wrapper .nav>li>a:focus {
  color: #fff;
  text-decoration: none;
  background-color: transparent;
  border-left: 2px solid #fff;
}

/* nested links */
.nav-wrapper .nav .nav>li>a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 30px;
    font-size: 12px;
}
/* nested nested links */
.nav-wrapper .nav .nav .nav>li>a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 50px;
    font-size: 10px;
}
/* hide all (inactive) nested list */
.nav-wrapper .nav ul.nav {
    display: none;
}
/* show active nested list */
.nav-wrapper .nav>.active>ul.nav {
    display: block;
}

.toolkit-block, .toolkit-item {
  padding-top: 70px;
  margin-top: -70px;
}
.toolkit-item {
  margin-bottom: 3px;
  margin-left: 12px;
}


.folder-name.level-0 {
  margin: 32px 0 16px 0;
  text-transform: uppercase;
  font-family: Montserrat,"Helvetica Neue",Helvetica,Arial,sans-serif;
  font-size: 24px;
  font-weight: 900;
  letter-spacing: 1px;
}
.folder-name.level-1 {
  margin: 14px 0 16px 0;
  text-transform: uppercase;
  font-family: Montserrat,"Helvetica Neue",Helvetica,Arial,sans-serif;
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 1px;
}
.folder-name.level-2 {
  margin: 12px 0 6px 0;
  font-family: Montserrat,"Helvetica Neue",Helvetica,Arial,sans-serif;
  font-size: 12px;
  font-weight: 400;
  letter-spacing: 1px;
}

.toolkit-item a {
    color: #4C4C4C;
    -webkit-transition: all .2s ease-in-out;
    -moz-transition: all .2s ease-in-out;
    transition: all .2s ease-in-out;
}
.toolkit-item a:hover,
.toolkit-item a:focus {
    text-decoration: none;
    color: #ed1b2e;
    cursor: pointer;
}


#search-box .tt-menu{
  max-height: 250px;
  overflow-y: scroll;
  overflow-y: -moz-scrollbars-vertical;
}
.typeahead,
.tt-query,
.tt-hint {
  width: 396px;
  height: 30px;
  padding: 8px 12px;
  font-size: 14px;
  line-height: 30px;
  border: 2px solid #ccc;
  -webkit-border-radius: 8px;
     -moz-border-radius: 8px;
          border-radius: 8px;
  outline: none;
}
.typeahead {
  background-color: #fff;
}
.tt-menu .empty-message {
  padding: 5px 10px;
  text-align: center;

}
.typeahead:focus {
  border: 2px solid #0097cf;
}
.tt-query {
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
     -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
}
.tt-hint {
  color: #999
}
.tt-menu {
  z-index: 20;
  text-align: left;
  width: 422px;
  margin-top: 12px;
  padding: 8px 0;
  background-color: #fff;
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  -webkit-border-radius: 8px;
     -moz-border-radius: 8px;
          border-radius: 8px;
  -webkit-box-shadow: 0 5px 10px rgba(0,0,0,.2);
     -moz-box-shadow: 0 5px 10px rgba(0,0,0,.2);
          box-shadow: 0 5px 10px rgba(0,0,0,.2);
}
.tt-suggestion {
  padding: 3px 20px;
  font-size: 12px;
  line-height: 16px;
}
.tt-suggestion:hover  {
  cursor: pointer;
  color: #fff;
  background-color: #0097cf;
}
.tt-suggestion.tt-cursor {
  color: #fff;
  background-color: #0097cf;
}
.tt-highlight {
  background-color: rgba(236,183,49,.6);
}
.tt-suggestion:hover .tt-highlight  {
  font-weight: inherit;
  background-color: inherit;
}
 p.tt-suggestion {
  margin: 0;
}


</style>
<div class="page-wrapper">
  <!--Nav Bar -->
  {% if locale != "ar" %}
  <nav id="toolkit-sidebar" class="">

    <div class="nav-wrapper">

      <ul class="nav nav-stacked nav-custom" style="padding-top:20px;" data-toolkitpath="1. toolkit" >
        <li><a href="#toolkit" class="page-scroll">{{site.data[locale].toolkit.about}}</a></li>
          <!-- . . . toolkit nav menu goes here . . . -->
      </ul>
      <div style="height:12px;"></div>
      <ul class="nav nav-stacked nav-custom" data-toolkitpath="2. modalities" >

          <!-- . . . modalities nav menu goes here . . . -->
      </ul>
    </div>
  </nav>
  {% endif %}
    <!-- Toolkit content -->
    <div id="toolkit" class="">

      <!--[if lte IE 9]>
        <section id="browser-warning">
          {{site.data[locale].iewarning}}
        </section>
      <![endif]-->

      {% if locale != "ar" %}
      <div class="menu-btn"><i class="fa fa-bars"></i></div>
      {% endif %}
      <div class="text-center">
          <h2>{{site.data[locale].toolkit.title}}</h2>

        <div id="error-toolkit" style="display:none;"><p>{{site.data[locale].toolkit.loaderror}}</p></div>
        <div id="grouped-toolkit">
          <p>{{site.data[locale].toolkit.paragraph1}}</p>
          <p>{{site.data[locale].toolkit.paragraph2}}</p>
          <p class="overview-docs">
          </p>
          <p class="toolkit-zip"></p>
          <h4>{{site.data[locale].toolkit.modules}}</h4>
          <p>
            <ul class="list-inline">
              <li><a href="#" class="page-scroll btn btn-default btn-lg btn-module btn-preparedness">{{site.data[locale].toolkit.module1}}</a></li>
              <li><a href="#" class="page-scroll btn btn-default btn-lg btn-module btn-assessment">{{site.data[locale].toolkit.module2}}</a></li>
              <li><a href="#" class="page-scroll btn btn-default btn-lg btn-module btn-response">{{site.data[locale].toolkit.module3}}</a></li>
              <li><a href="#" class="page-scroll btn btn-default btn-lg btn-module btn-implementation">{{site.data[locale].toolkit.module4}}</a></li>
              <li><a href="#" class="page-scroll btn btn-default btn-lg btn-module btn-evaluation">{{site.data[locale].toolkit.module5}}</a></li>
            </ul>
          </p>

        </div>   <!--  / #grouped-tookit   -->

          <h4>{{site.data[locale].toolkit.modalities}}</h4>

          <div id="error-modalities" style="display:none;"><p>{{site.data[locale].toolkit.loaderror}}</p></div>
          <div id="grouped-modalities">
          <p>
            <ul class="list-inline">
              <li><a href="#" class="page-scroll btn btn-default btn-lg btn-resources btn-cashforwork">{{site.data[locale].toolkit.cashforwork}}</a></li>
              <li><a href="#" class="page-scroll btn btn-default btn-lg btn-resources btn-vouchers">{{site.data[locale].toolkit.vouchers}}</a></li>
            </ul>
          </p>
          </div>
          <img class="img-resources img-circle" src="/img/toolkit-modalities.jpg" alt="join">

        <div id="grouped-searchbox">  <!-- hide if errors -->
        <p>
          <div id="search-box">
          <input class="typeahead" type="text" placeholder="{{site.data[locale].toolkit.searchmessage}}">
          </div>
          <div><small>({{site.data[locale].toolkit.suggestlimit}})</small></div>
        </p>
        </div>
      </div>

      <div id="toolkit-contents">
        <div data-toolkitpath="1. toolkit" class="toolkit-block">
            <div class="contents"></div>
            <!-- . . . folders and file links go here . . . -->
        </div>
        <div data-toolkitpath="2. modalities" class="toolkit-block">
            <div class="contents"></div>
            <!-- . . . folders and file links go here . . . -->
        </div>
      </div>

    </div>
    <div style="width:100%; height: 500px; background-color:#f5f5f5;"></div>

</div>
<script src="/js/typeahead.bundle.js" charset="utf-8"></script>
<script src="/js/handlebars-v4.0.5.js" charset="utf-8"></script>
<script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script>

// HELPERS
// #######

$('.menu-btn').on('click', function(){
  if ($('.menu-btn').hasClass('is-open')) {
    $('.menu-btn').removeClass('is-open');
    d3.select('.menu-btn').select('.fa').classed({ "fa-bars": true, "fa-times": false })
    $('#toolkit').removeClass('is-open');
    $('#toolkit-sidebar').removeClass('is-open');
  } else {
    $('.menu-btn').addClass('is-open');
    d3.select('.menu-btn').select('.fa').classed({ "fa-bars": false, "fa-times": true })
    $('#toolkit').addClass('is-open');
    $('#toolkit-sidebar').addClass('is-open');
  }
});


$('body').scrollspy({
    target: '.nav-wrapper',
    offset: 200 // // can use this or something like ...  padding-top: 70px; && margin-top: -70px;
});


var systemFile = function(filename){
  if (filename.indexOf('.') === 0){
    return true;
  } else { return false; }
};
var typeIcon = function(extension){
  switch(extension) {
    case ".doc":
    case ".docx":
      return '<i class="fa fa-fw fa-file-word-o"></i> '
      break;
    case ".jpeg":
    case ".jpg":
    case ".png":
      return '<i class="fa fa-fw fa-file-image-o"></i> '
      break;
    case ".pdf":
      return '<i class="fa fa-fw fa-file-pdf-o"></i> '
      break;
    case ".ppt":
    case ".pptx":
      return '<i class="fa fa-fw fa-file-powerpoint-o"></i> '
      break;
    case ".xls":
    case ".xlsm":
    case ".xlsx":
      return '<i class="fa fa-fw fa-file-excel-o"></i> '
      break;
    case ".zip":
      return '<i class="fa fa-fw fa-file-archive-o"></i> '
      break;
    default:
      return '<i class="fa fa-fw fa-file-o"></i> '
  }
};

function identity(ugly) {
  var ugly = 'o_' + ugly;
  var step1 = ugly.replace(/^[^-_a-zA-Z]+/, '').replace(/^-(?:[-0-9]+)/, '-');
  var step2 = step1 && step1.replace(/[^-_a-zA-Z0-9]+/g, '-');
  return step2.toLowerCase();
}



// GLOBAL VARIABLES
// ################
var language = "{{locale}}"
var emptymessage = "{{site.data[locale].toolkit.emptymessage}}"
var toolkitdata, modalitiesdata;

function fetchToolkit(){
  $.ajax({
    type: 'GET',
    url: 'http://webviz.redcross.org/ctp/toolkit/' + language,
    dataType: 'JSON',
    error: function(){
      toolkitdata = [];
      $("#error-toolkit").show();
      $("#grouped-toolkit").hide();
      fetchModalities();
    },
    success: function(response){
      toolkitdata = (response === undefined) ? [] : response;
      if(toolkitdata.length > 0){
        buildToolkit();
      } else {
        $("#error-toolkit").show();
        $("#grouped-toolkit").hide();
        fetchModalities();
      }
    }
  });
}

function buildToolkit() {

  var counter = 0;
  var folderPaths = [];
  var pathPartsArray = [];
  $.each(toolkitdata, function(index, d){
    // this is necessary to get those folders if there is a folder without a file inside (just other folders)
    for(i=2;i<=d.dboxpathparts.length;i++){
      if($.inArray(d.dboxpathparts.slice(0,i).join('/'), folderPaths) === -1) {
        folderPaths.push(d.dboxpathparts.slice(0,i).join('/'))
        pathPartsArray.push(d.dboxpathparts.slice(0,i))
      }
    }
  });

  var rollup = d3.nest()
    .key(function(d){ return d.length; })
    .sortKeys(d3.ascending)
    .sortValues(function(a,b){ return d3.ascending(a.join('/'), b.join('/')); })
    .entries(pathPartsArray);

  for(var i=0; i<rollup.length; i++){
    $.each(rollup[i].values, function(index,d){
      // find parent nav list item and add a sub element to it
      var navHtml = '<li><a href="#' + identity(d.slice(1).join('/')) + '" class="page-scroll">' + d.slice(-1) + '</a>' +
          '<ul class="nav nav-stacked" data-toolkitpath="' + d.join('/') + '"></ul></li>';
      $('#toolkit-sidebar [data-toolkitpath="' + d.slice(0,-1).join('/') + '"]').append(navHtml);
      // find parent folder list element and add a sub folder div element to it
      var contentsHtml = '';
      if(d.length === 2 && counter === 0){
        counter++;
        contentsHtml += '<div class="content-section text-center module-divider module-divider-' + counter + '"></div>';
      }
      // find parent folder list element and add a sub folder div element to it
      contentsHtml += '<div id="' + identity(d.slice(1).join('/')) + '" class="toolkit-block" data-toolkitpath="' + d.join('/') + '">' +
        '<div class="folder-name level-' + i + '">' +
        ' &nbsp;' + d.slice(-1) + '</div><div class="contents"></div></div>';
      if(d.length === 2){
        counter ++;
        contentsHtml += '<div class="content-section text-center module-divider module-divider-' + counter + '"></div>';
      }
      $('#toolkit-contents [data-toolkitpath="' + d.slice(0,-1).join('/') + '"]').append(contentsHtml);

      // add correct links for pretty top level folder buttons (the element id will vary for different languages)
      if(d.length === 2) {
        var pageLink = '#' + identity(d.slice(1).join('/'));
        if(pageLink.indexOf('1') > -1){
          $('.btn-module.btn-preparedness').attr('href', pageLink);
        }
        if(pageLink.indexOf('2') > -1){
          $('.btn-module.btn-assessment').attr('href', pageLink);
        }
        if(pageLink.indexOf('3') > -1){
          $('.btn-module.btn-response').attr('href', pageLink);
        }
        if(pageLink.indexOf('4') > -1){
          $('.btn-module.btn-implementation').attr('href', pageLink);
        }
        if(pageLink.indexOf('5') > -1){
          $('.btn-module.btn-evaluation').attr('href', pageLink);
        }
      }
    });
  }

  toolkitdata.sort(function(a,b){ return d3.descending(a.fullpath, b.fullpath); })
    for(var i=0; i<toolkitdata.length; i++){
      if(systemFile(toolkitdata[i].basename) === false){
        if(toolkitdata[i].dboxpathparts.length === 1){
          if(toolkitdata[i].ext === ".zip"){
            var thisHtml = "{{site.data[locale].toolkit.zip}}" + ' ' +
              '<a target="_blank" href="http://webviz.redcross.org/ctp/docs/' + language + '/1. toolkit/' + toolkitdata[i].basename + '">' +
              "{{site.data[locale].toolkit.toolkit}}" + ' ' + typeIcon(toolkitdata[i].ext) + '</a></div>';
            $('.toolkit-zip').html(thisHtml);
          } else {
            var thisHtml = '<div id="' + identity(toolkitdata[i].dboxpathparts.slice(1).join('/') + toolkitdata[i].basename) + '">' +
              '<a target="_blank" href="http://webviz.redcross.org/ctp/docs/' + language + '/1. toolkit/' + toolkitdata[i].basename + '">' +
              toolkitdata[i].basename.slice(0,toolkitdata[i].basename.indexOf(toolkitdata[i].ext)) + ' ' + typeIcon(toolkitdata[i].ext) + '</a></div>';
            $('.overview-docs').append(thisHtml);
          }
        } else {
          var thisHtml = '<div class="toolkit-item" id="' + identity(toolkitdata[i].dboxpathparts.slice(1).join('/') + toolkitdata[i].basename) + '">' +
            '<a target="_blank" href="http://webviz.redcross.org/ctp/docs/' + language + '/' +
            toolkitdata[i].dboxpathparts.join('/') + '/' + toolkitdata[i].basename + '">' +
            toolkitdata[i].basename.slice(0,toolkitdata[i].basename.indexOf(toolkitdata[i].ext)) + ' ' + typeIcon(toolkitdata[i].ext) + '</a></div>';
            // console.log(identity(toolkitdata[i].dboxpathparts.join('/')))
          $('[data-toolkitpath="' + toolkitdata[i].dboxpathparts.join('/') + '"]').children('.contents').prepend(thisHtml);
        }
      }
    }

  fetchModalities();

}

function fetchModalities(){
  $.ajax({
    type: 'GET',
    url: 'http://webviz.redcross.org/ctp/modalities/' + language,
    dataType: 'JSON',
    error: function(){
      modalitiesdata = [];
      $("#error-modalities").show();
      $("#grouped-modalities").hide();
      buildSearchBox();
    },
    success: function(response){
      modalitiesdata = (response === undefined) ? [] : response;
      if(modalitiesdata.length > 0){
        buildModalities();
      } else {
        $("#error-modalities").show();
        $("#grouped-modalities").hide();
        buildSearchBox();
      }
    }
  });
}

function buildModalities(){

  var folderPaths = [];
  var pathPartsArray = [];
  $.each(modalitiesdata, function(index, d){
    // this is necessary to get those folders if there is a folder without a file inside (just other folders)
    for(i=2;i<=d.dboxpathparts.length;i++){
      if($.inArray(d.dboxpathparts.slice(0,i).join('/'), folderPaths) === -1) {
        folderPaths.push(d.dboxpathparts.slice(0,i).join('/'))
        pathPartsArray.push(d.dboxpathparts.slice(0,i))
      }
    }
  });

  var rollup = d3.nest()
    .key(function(d){ return d.length; })
    .sortKeys(d3.ascending)
    .sortValues(function(a,b){ return d3.ascending(a.join('/'), b.join('/')); })
    .entries(pathPartsArray);


  for(var i=0; i<rollup.length; i++){
    $.each(rollup[i].values, function(index,d){
      // find parent nav list item and add a sub element to it
      var navHtml = '<li><a href="#' + identity(d.slice(1).join('/')) + '" class="page-scroll">' + d.slice(-1) + '</a>' +
          '<ul class="nav nav-stacked" data-toolkitpath="' + d.join('/') + '"></ul></li>';
      $('#toolkit-sidebar [data-toolkitpath="' + d.slice(0,-1).join('/') + '"]').append(navHtml);
      // find parent folder list element and add a sub folder div element to it
      var contentsHtml = '<div id="' + identity(d.slice(1).join('/')) + '" class="toolkit-block" data-toolkitpath="' + d.join('/') + '">' +
        '<div class="folder-name level-' + i + '">' +
        ' &nbsp;' + d.slice(-1) + '</div><div class="contents"></div></div>';
      $('#toolkit-contents [data-toolkitpath="' + d.slice(0,-1).join('/') + '"]').append(contentsHtml);
      // add correct links for pretty top level folder buttons (the element id will vary for different languages)
      if(d.length === 2) {
        var pageLink = '#' + identity(d.slice(1).join('/'));
        if(pageLink.indexOf('1') > -1){
          $('.btn-resources.btn-cashforwork').attr('href', pageLink);
        }
        if(pageLink.indexOf('2') > -1){
          $('.btn-resources.btn-vouchers').attr('href', pageLink);
        }
      }
    });
  }

  modalitiesdata.sort(function(a,b){ return d3.descending(a.fullpath, b.fullpath); })
  for(var i=0; i<modalitiesdata.length; i++){
    if(systemFile(modalitiesdata[i].basename) === false){
      var thisHtml = '<div class="toolkit-item" id="' + identity(modalitiesdata[i].dboxpathparts.slice(1).join('/') + modalitiesdata[i].basename) + '">' +
        '<a target="_blank" href="http://webviz.redcross.org/ctp/docs/' + language + '/' +
        modalitiesdata[i].dboxpathparts.join('/') + '/' + modalitiesdata[i].basename + '">' +
        modalitiesdata[i].basename.slice(0,modalitiesdata[i].basename.indexOf(modalitiesdata[i].ext)) + ' ' + typeIcon(modalitiesdata[i].ext) + '</a></div>';
      $('[data-toolkitpath="' + modalitiesdata[i].dboxpathparts.join('/') + '"]').children('.contents').prepend(thisHtml);
    }
  }


  $(function() {
      $('a.page-scroll').bind('click', function(event) {
          var $anchor = $(this);
          $('html, body').stop().animate({
              scrollTop: $($anchor.attr('href')).offset().top
          }, 1500, 'easeInOutExpo');
          event.preventDefault();
      });
  });

  buildSearchBox();

}

// this section uses handlebars
// need to escape it so jekyll doesn't mess it up
{% raw %}

function buildSearchBox(){
  // format the data for inclusion into the search
  var searchData = []
  $.each(toolkitdata, function(index, d){
    // exclude system files and files not in a folder (they go higher up the page)
    if(systemFile(d.basename) === false && d.dboxpathparts.length>1){
      searchData.push({
        "name": d.basename.slice(0,d.basename.indexOf(d.ext)),
        "type": d.ext.slice(1),
        "path": d.dboxpathparts.slice(1).join(' / '),
        "href": '#' + identity(d.dboxpathparts.slice(1).join('/') + d.basename)
      })
    }
  })
  $.each(modalitiesdata, function(index, d){
    // exclude system files and files not in a folder (they go higher up the page)
    if(systemFile(d.basename) === false && d.dboxpathparts.length>1){
      searchData.push({
        "name": d.basename.slice(0,d.basename.indexOf(d.ext)),
        "type": d.ext.slice(1),
        "path": d.dboxpathparts.slice(1).join(' / '),
        "href": '#' + identity(d.dboxpathparts.slice(1).join('/') + d.basename)
      })
    }
  })

  if(searchData.length === 0){ $("#grouped-searchbox").hide(); }

  // constructs the suggestion engine
  var documents = new Bloodhound({
    datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name' , 'type', 'path'),
    queryTokenizer: Bloodhound.tokenizers.whitespace,
    local: searchData,
    sorter: function(a, b) {
      if (a.path < b.path) {
        return -1;
      }
      else if (a.path > b.path) {
        return 1;
      }
      else return 0;

    }
  });

  // kicks off the loading/processing of `local`
  documents.initialize();

  $('#search-box .typeahead').typeahead({
    // hint: true,
    highlight: true,
    minLength: 1
  },
  {
    name: 'documents',
    displayKey: Handlebars.compile('{{name}}'),
    limit: 20,
    source: documents.ttAdapter(),
    templates: {
      empty:[
        '<div class="empty-message">',
        '<i>' + emptymessage + '</i>',
        '</div>'
      ].join('\n'),
      suggestion: Handlebars.compile('<p>{{path}} <br> &nbsp;&nbsp;&nbsp;{{name}}</p>')
    }
  }).on('typeahead:selected', function (eventObj, datum) {
    selectedDocument(datum);
  });
}
{% endraw %}

function selectedDocument(datum) {

  $('html, body').stop().animate({
      scrollTop: $(datum.href).offset().top
  }, 1500, 'easeInOutExpo');

  $('#search-box .typeahead').typeahead('val', '');

}

fetchToolkit();

</script>
